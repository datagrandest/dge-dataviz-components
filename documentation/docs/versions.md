# Notes de version

Ci-dessous les notes relatives aux différentes versions publiées de DGE-DataViz-Components.  
Si certaines évolutions ne sont pas documentées, n'hésitez pas à me contacter.

## v4.5.1 - 20220601

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.5.1/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.5.1/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.5.1/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.5.1/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.5.1/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.5.1/dge-all.js){:target="\_blank"}                           |
| dist_4.5.1.zip | ZIP    | [téléchargement](./dist/4.5.1/dist_4.5.1.zip){:target="\_blank"}                       |
| dist_4.5.1.7z  | 7Z     | [téléchargement](./dist/4.5.1/dist_4.5.1.7z){:target="\_blank"}                        |

### Evolutions

- `dge-figure`: 
    - [x] Correction des propriétés `filter` et `search`
- `dist`:
    - [x] Mise à jour des différentes bibliothèques vers leurs dernières versions
- `documentation`: 
    - [x] Corrections mineures
    - [x] Organisation des propriétés par ordre alphabétique

## v4.5.0 - 20220501

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.5.0/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.5.0/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.5.0/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.5.0/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.5.0/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.5.0/dge-all.js){:target="\_blank"}                           |
| dist_4.5.0.zip | ZIP    | [téléchargement](./dist/4.5.0/dist_4.5.0.zip){:target="\_blank"}                       |
| dist_4.5.0.7z  | 7Z     | [téléchargement](./dist/4.5.0/dist_4.5.0.7z){:target="\_blank"}                        |

### Evolutions

- `dge-figure`: 
    - [x] Ajout du paramètre `value` afind e pouvoir afficher une valeur directement sans utiliser de données externes. Il est ainsi possible d'ajouter la valeur via une varaible de la page (ex.: `value="'<?php echo $value; ?>'"`)
- `dist`:
    - [x] Mise à jour des différentes bibliothèques vers leurs dernières versions

## v4.4.0 - 20220303

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.4.0/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.4.0/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.4.0/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.4.0/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.4.0/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.4.0/dge-all.js){:target="\_blank"}                           |
| dist_4.4.0.zip | ZIP    | [téléchargement](./dist/4.4.0/dist_4.4.0.zip){:target="\_blank"}                       |
| dist_4.4.0.7z  | 7Z     | [téléchargement](./dist/4.4.0/dist_4.4.0.7z){:target="\_blank"}                        |

### Evolutions

- `dge-figure`: 
    - [x] Ajout d'une fonction pour parser les données et convertir les chaïnes de caractère en nombre quand c'est possible
- `dge-table`: 
    - [x] Correction de prise en compte du paramètre `page=`
    - [x] Correction d'un problème de récupération des données de l'API de D4C
    - [x] Ajout de la propriété `parsehtml` qui permet d'interpréter les URL et balises HTML dans la table
- `dist`:
    - [x] Mise à jour de Bootstrap Icons vers la version 1.8.1

## v4.3.1 - 20220117

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.3.1/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.3.1/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.3.1/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.3.1/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.3.1/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.3.1/dge-all.js){:target="\_blank"}                           |
| dist_4.3.1.zip | ZIP    | [téléchargement](./dist/4.3.1/dist_4.3.1.zip){:target="\_blank"}                       |
| dist_4.3.1.7z  | 7Z     | [téléchargement](./dist/4.3.1/dist_4.3.1.7z){:target="\_blank"}                        |

### Evolutions

- `dge-map`: 
    - [x] Ajout de "https" lors de l'appel du serveur OSM par défaut
- `documentation`: 
    - [x] Corriger les exemples de `dge-map`

## v4.3.0 - 20220111

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.3.0/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.3.0/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.3.0/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.3.0/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.3.0/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.3.0/dge-all.js){:target="\_blank"}                           |
| dist_4.3.0.zip | ZIP    | [téléchargement](./dist/4.3.0/dist_4.3.0.zip){:target="\_blank"}                       |
| dist_4.3.0.7z  | 7Z     | [téléchargement](./dist/4.3.0/dist_4.3.0.7z){:target="\_blank"}                        |

### Evolutions

- `dge-figure`: 
    - [x] Ajout de la propriété `refresh` pour premetre une rechargement (mise à jour) des données à interval régulier
- `dge-table`: 
    - [x] Ajout de la propriété `refresh` pour premetre une rechargement (mise à jour) des données à interval régulier
- `dge-chart`: 
    - [x] Ajout de la propriété `refresh` pour premetre une rechargement (mise à jour) des données à interval régulier
- `documentation`:
    - [x] Mise à jour vers la version 8.1.6 du template [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/)
    - [x] Ajout de la description des différentes sources de données (fichiers CSV, fichiers et API JSON, flux WFS et API Data4Citizen). Cf. [documentation](documentation-start.md#les-sources-de-donnees)
    - [x] Ajout de la section "CSS et mise en forme". Cf. [documentation](documentation-start.md#css-et-mise-en-forme)

## v4.2.0 - 20211219

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.2.0/dge-figure.js){:target="\_blank"}                        |
| dge-table.js   | JS     | [téléchargement](./dist/4.2.0/dge-table.js){:target="\_blank"}                         |
| dge-chart.js   | JS     | [téléchargement](./dist/4.2.0/dge-chart.js){:target="\_blank"}                         |
| dge-text.js    | JS     | [téléchargement](./dist/4.2.0/dge-text.js){:target="\_blank"}                          |
| dge-image.js   | JS     | [téléchargement](./dist/4.2.0/dge-image.js){:target="\_blank"}                         |
| dge-all.js     | JS     | [téléchargement](./dist/4.2.0/dge-all.js){:target="\_blank"}                           |
| dist_4.2.0.zip | ZIP    | [téléchargement](./dist/4.2.0/dist_4.2.0.zip){:target="\_blank"}                       |
| dist_4.2.0.7z  | 7Z     | [téléchargement](./dist/4.2.0/dist_4.2.0.7z){:target="\_blank"}                        |

### Evolutions

- `dge-map`: 
    - [x] Ajout de la propriété `gesturehandling` qui nécessite d'appuyer sur la touche "contrôle" pour pouvoir zoomer si elle est activée.
    - [x] Ajout de la propriété `data` pour ajouter plusieurs couches WMS ou GeoJSON.
    - [x] Ajout de la propriété `osm` pour afficher ou non le fond de carte OSM par défaut.
    - [x] Ajout de la propriété `baselayers` qui permet d'indiquer plusieurs fonds de carte. Si plusieurs fonds de carte, alors une sélection dans le menu des layers est possible. La propriété `baselayer` est conservée pour le moment et sera déprécié dans une future version.
- `dge-table`: 
    - [x] Ajout de la propriété générale `pagination` qui reprend les propriétés de pagination existantes en une seule propriété.
    - [x] Ajout de la propriété `selectpages`.
- `dge-figure`: 
    - [x] Ajout de la propriété générale `image`.
- `dge-chart`: 
    - [x] Modification des propriété `download` sous forme d'objet pour pouvoir la gérer plus facilement et utiliser des icons ou du texte pour le lien de téléchargement du graphique en image.
- `dge-helpers`: 
    - [x] Amélioration de la fonction "getJsonFromString()" pour la gestion des propriétés de la forme `property="att1:value1;att2:value2"`. Désormais la valeur des attributs peut contenir le caractère ":" (utile pour les URL).
- `all`:
    - [x] Modification des propriété `attribution` et `datalink` sous forme d'objet pour pouvoir les gérer plus facilement et utiliser des icons ou du texte.
- Application - Réorganisation et optimisation du code l'application pour faciliter le développement et la compilation:
    - [x] Création de différents fichiers de configuration "rollup" pour permettre la compilation du code individuellement par composant ou de façon globale.
    - [x] Ajout d'une version compilée `dge-all.js` comprenant l'ensemble des composants (évite la duplication de certaines bibliothèques comme "Paparse" et "Alasql" par composant).
- Documentation:
    - [x] Ajout de la présente page listant les versions.
    - [x] Documentation des priopriétés manquantes
    - [x] Amélioration de la documentation dans son ensemble

## v4.1.4 - 20211201

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.1.4/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.1.4/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.1.4/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.1.4/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.1.4/dge-image.js){:target="\_blank"}  |
| dist_4.1.4.zip | ZIP    | [téléchargement](./dist/4.1.4/dist_4.1.4.zip){:target="\_blank"}                             |
| dist_4.1.4.7z  | 7Z     | [téléchargement](./dist/4.1.4/dist_4.1.4.7z){:target="\_blank"}                              |

### Evolutions

- `dge-chart`: 
    - [x] Ajouter la capacité de télécharger le graphique sous forme d'image. Activé via la propriété `download` qui permet également de préciser le nom du lien à afficher. Ex.: `download="Télécharger"`.

## v4.1.3 - 20211129

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.1.3/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.1.3/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.1.3/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.1.3/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.1.3/dge-image.js){:target="\_blank"}  |
| dist_4.1.3.zip | ZIP    | [téléchargement](./dist/4.1.3/dist_4.1.3.zip){:target="\_blank"}                             |
| dist_4.1.3.7z  | 7Z     | [téléchargement](./dist/4.1.3/dist_4.1.3.7z){:target="\_blank"}                              |

### Evolutions

- `dge-chart`: 
    - [x] Ajout de graphique de type "wordCloud" via le pluin "chartjs-chart-wordcloud" (cf. https://github.com/sgratzl/chartjs-chart-wordcloud).

## v4.1.2 - 20211128

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.1.2/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.1.2/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.1.2/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.1.2/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.1.2/dge-image.js){:target="\_blank"}  |
| dist_4.1.2.zip | ZIP    | [téléchargement](./dist/4.1.2/dist_4.1.2.zip){:target="\_blank"}                             |
| dist_4.1.2.7z  | 7Z     | [téléchargement](./dist/4.1.2/dist_4.1.2.7z){:target="\_blank"}                              |

### Evolutions

- `dge-chart`: 
    - [x] Ajout d'un type de graphique "treemap" via le pluin "chartjs-chart-treemap" (cf. https://chartjs-chart-treemap.pages.dev).

## v4.1.1 - 20211121

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.1.1/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.1.1/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.1.1/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.1.1/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.1.1/dge-image.js){:target="\_blank"}  |
| dist_4.1.1.zip | ZIP    | [téléchargement](./dist/4.1.1/dist_4.1.1.zip){:target="\_blank"}                             |
| dist_4.1.1.7z  | 7Z     | [téléchargement](./dist/4.1.1/dist_4.1.1.7z){:target="\_blank"}                              |

### Evolutions

- `dge-chart`: 
    - [x] Ajout de la propriété `labels` qui permet de préciser le nom des étiquettes pour les valeurs des abscisses (x).
    - [x] Ajout de la propriété `reverse` qui permet d'inverser les données, c'est à dire de transposer une série en ligne, en colonne. Les en-tête de colonne deveniennent alors les valeurs d'abscisse (x). Il faut dans ce cas utiliser conjointement la proriété `labels` pour définir le nom des étiquettes en abscisse (par défaut: elles sont du type `y0`, `y1`, etc.).
    - [x] Ajout des propriétés `width` et `height` pour définir la taille du graphique. Les dimensions sont calculées automatiquement de façon responsive à partir du rapport entre la hauteur et la largeur. Par défaut ces valeurs sont respectivement de 4 et 3 soit un rapport de 4/3.
    - [x] Amélioration du calcul des étiquettes quand `dlformat="percent"`.
    - [x] Ajout du type `chart="bar-hs"` pour un graphique horizontal "stacked".

## v4.1.0 - 20211121

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.1.0/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.1.0/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.1.0/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.1.0/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.1.0/dge-image.js){:target="\_blank"}  |
| dist_4.1.0.zip | ZIP    | [téléchargement](./dist/4.1.0/dist_4.1.0.zip){:target="\_blank"}                             |
| dist_4.1.0.7z  | 7Z     | [téléchargement](./dist/4.1.0/dist_4.1.0.7z){:target="\_blank"}                              |

### Evolutions

- `dge-chart`: 
    - [x] Ajout de la propriété `animation` (ex.: `animation="duration:5000"`). Cf. https://www.chartjs.org/docs/latest/configuration/animations.html#animation
    - [x] Ajout d'un type `chart="gauge"`. La configuration se fait via la propriété `gauge="circumference:270;rotation:-135;cutout:75%;radius:98%;borderRadius:2;offset:15"`.
    - [x] Ajout d'un propriété pour affihcer un texte au centre du graphique (de type doughnut ou gauge de préférence). Le texte peut être sur plusieurs lignes (séparateur "|" dans la propriété). Des variables de données peuvent être utilisées sous la forme "%operation,decimal,[ligne],[colonne]%". Une seule variable peut être utilisée par ligne de texte. Ex.: `textcenter="label:OUI;color:rgba(120,180,60,1);baseLine:middle;fontSize:12;fontFamily:Arial;fontStyle:normal;fontWeight:normal;y:40|label:%percent,2,0%%;color:rgba(180,120,60,1);baseLine:middle;fontSize:15;fontWeight:bold;fontFamily:Arial;y:50;x:20"`
- [x] Ajout des variables de données dans le titre pour `dge-chart` et `dge-table`. Une seule variable peut être indiquée dans le titre. La forme est "%operation,decimal,[ligne],[colonne]%".

## v4.0.1 - 20211111

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.0.1/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.0.1/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.0.1/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.0.1/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.0.1/dge-image.js){:target="\_blank"}  |
| dist_4.0.1.zip | ZIP    | [téléchargement](./dist/4.0.1/dist_4.0.1.zip){:target="\_blank"}                             |
| dist_4.0.1.7z  | 7Z     | [téléchargement](./dist/4.0.1/dist_4.0.1.7z){:target="\_blank"}                              |

### Evolutions

- [x] Résolution d'un problème de filtre quand il y a une apostropphe dans les valeurs d'une liste (propriété `filter`): besoin déchapper les caractères dans la requête SQL.
- [x] Ajout des paramètres "%filter%" et "%search%" comme variable de la propriété `text` (`dge-figure`) et `title` (`dge-table` et `dge-chart`) pour afficher directement les valeurs du filtre appliqué
- [x] Ajout de la possibilité de choisir une valeur par défault pour la propriété `filter` parmis celles de la liste déroulante sans indiquer de valeur globalisante.

## v4.0.0 - 20210910

### Téléchargements

| Fichier        | Format | Téléchargement                                                                         |
| -------------- | ------ | -------------------------------------------------------------------------------------- |
| dge-figure.js  | JS     | [téléchargement](./dist/4.0.0/dge-figure.js){:target="\_blank"} |
| dge-table.js   | JS     | [téléchargement](./dist/4.0.0/dge-table.js){:target="\_blank"}  |
| dge-chart.js   | JS     | [téléchargement](./dist/4.0.0/dge-chart.js){:target="\_blank"}  |
| dge-text.js    | JS     | [téléchargement](./dist/4.0.0/dge-text.js){:target="\_blank"}   |
| dge-image.js   | JS     | [téléchargement](./dist/4.0.0/dge-image.js){:target="\_blank"}  |
| dist_4.0.0.zip | ZIP    | [téléchargement](./dist/4.0.0/dist_4.0.0.zip){:target="\_blank"}                             |
| dist_4.0.0.7z  | 7Z     | [téléchargement](./dist/4.0.0/dist_4.0.0.7z){:target="\_blank"}                              |

### Evolutions

- `dge-map`: 
    - [x] Ajout du paramètre paramètre `baselayer` pour pouvoir changer le fond de carte par défaut (OSM) par un autre fonds WMS
    - [x] Modification du paramètre `attribution` afin de pouvoir ajouter plusieurs attribution. Il est désormais de la forme "nom1,url1|nom2,url2"
