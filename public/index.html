<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <title>DataGrandEst dataviz components - Test</title>
    <link rel='icon' type='image/png' href='favicon.png'>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

    <!-- <script src="./dist/jquery/jquery-3.6.0.slim.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <!-- <script src="./dist/popper/popper.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.0/umd/popper.min.js"
        integrity="sha512-PZrlUFhlOigX38TOCMdaYkhiqa/fET/Lztzjn+kdGxefUZanNUfmHv+9M/wSiOHzlcLX/vcCnmvOZSHi5Dqrsw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script src="./dist/bootstrap/js/bootstrap.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous">
    </script>

    <script defer src='./dist/dge-dataviz-components/dge-chart.js'></script>
    <script defer src='./dist/dge-dataviz-components/dge-figure.js'></script>
    <script defer src='./dist/dge-dataviz-components/dge-image.js'></script>
    <script defer src='./dist/dge-dataviz-components/dge-map.js'></script>
    <script defer src='./dist/dge-dataviz-components/dge-table.js'></script>
    <script defer src='./dist/dge-dataviz-components/dge-text.js'></script>
</head>

<body>

    <div class="container my-3">
        <div class="row my-5">
            <div class="col-12">
                <h1>DGE Dataviz Components <small class="text-muted"> - Exemples</small></h1>
                <p>Ceci est une page d'exemples. Pour plus d'informations, merci de consulter la <a
                        href="./documentation/index.html" target="_blank">documentation</a>.</p>
            </div>
        </div>


        <!-- TEXT -->
        <!-- <div class="row my-3">
            <div class="col">
                <dge-text id="dge-text-1" text="Mon texte descriptif ici..." title="Exemple de texte"
                    attribution="text:GéoGrandEst;url:https://www.datagrandest.fr" />
            </div>
            <div class="col">
                <dge-text id="dge-text-1">
                    <div slot="text">
                        <h5>Le titre de mon texte dans le <em>slot</em></h5>
                        <p class="m-0 p-0">Le texte avec un <em>slot</em> de mise en forme...<br />
                            et la possibilité d'utiliser du <em>HTML</em>, par exemple ajouter un bouton.
                        </p>
                        <button type="button" class="btn btn-primary mt-3 float-right">Action</button>
                    </div>
                </dge-text>
            </div>
        </div> -->

        <!-- IMAGE -->
        <!-- <div class="row my-3">
            <div class="col-6">
                <dge-image id="dge-image-1"
                    src="https://images.pexels.com/photos/356269/pexels-photo-356269.jpeg"
                    legend="Japon" title="Exemple d'image" localcss="1"
                    attribution="text:Pexels;url:https://images.pexels.com" />
            </div>
        </div> -->

        <!-- FIGURES -->
        <!-- <div class="row my-3">
            <div class="col-6">
                <dge-figure id="dge-figure-1"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr|Région Grand Est:icon;url:test"
                    value="456" unit="€" text="Test quantité*prix" />
            </div>
            <div class="col-6">
            <dge-figure id="dge-figure-2" attribution="text:DataGrandEst;url:https://www.datagrandest.fr" api="wfs"
                url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs" fields="pmun_rp2018,insee_com"
                datasets="commune_actuelle" max="6000" iconname="people-fill" operation="sum|pmun_rp2018" unit="hab."
                where="insee_com=67186" text="Commune de Hegeney (2018)" />
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-3"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr|Région Grand Est:icon;url:test"
                    api="csv" url="data/test.csv" fields="id,quantite,objet,prix" operation="value|sum(quantite*prix)"
                    unit="€" text="Test quantité*prix" _refresh="2" />
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-4"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr|Région Grand Est:icon;url:test"
                    api="csv" url="data/test.csv" fields="id,quantite,objet,prix" operation="value|sum(quantite*prix)"
                    unit="€" text="Test quantité*prix" filter="Tous|objet|gomme" />
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-5"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr|Région Grand Est:icon;url:test"
                    api="wfs" url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs" fields="contenance"
                    datasets="propriete_fonciere_region" max="200" iconname="bounding-box-circles" iconsize="170px"
                    iconcolor="#f00" operation="sum|contenance" unit="m²" filter=""
                    text="Contenance totale des propriétés foncières de la Région Grand Est" />
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-2" attribution="text:DataGrandEst;url:https://www.datagrandest.fr" api="wfs"
                    url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs" fields="contenance"
                    datasets="propriete_fonciere_region" max="200"
                    icon="name:bounding-box-circles;size:5rem;color:#292;position:left" operation="count|contenance"
                    unit="propiétés" filter="" localcss="1"
                    text="Nombre de propriétés foncières de la Région Grand Est"></dge-figure>
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-2" attribution="text:DataGrandEst;url:https://www.datagrandest.fr" api="wfs"
                    url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs" fields="contenance"
                    datasets="propriete_fonciere_region" max="200"
                    image="rounded:true;position:bottom;url:https://static.actu.fr/uploads/2020/06/lycee-colbert-thionville-960x532.jpg"
                    operation="count|contenance" unit="propiétés" filter="" localcss="1"
                    text="Nombre de propriétés foncières de la Région Grand Est"></dge-figure>
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-2" api="wfs" url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs"
                    fields="contenance" datasets="propriete_fonciere_region" max="200"
                    image="rounded:true;position:left;url:https://www.rue89strasbourg.com/wp-content/uploads/2020/11/33963593718-dcde964cd0-k.jpg"
                    operation="count|contenance" datalink="icon:table;title:Lien vers les données"
                    attribution="icon:info-circle-fill;title:DataGrandEst;url:https://www.datagrandest.fr" unit=""
                    filter="" localcss="1" text="Propriétés foncières de la Région Grand Est"></dge-figure>
            </div>
            <div class="col-6">
                <dge-figure id="dge-figure-2" api="csv" url="./data/values.csv" fields="contenance"
                    operation="sum|`value`" text="Test avec un champ 'value'"></dge-figure>
            </div>
        </div> -->

        <!-- TABLES -->
        <!-- <div class="row my-3">
            <div class="col-6">
                <dge-table id="dge-table-1" api="csv" url="data/test.csv" fields="id,commande,prix,objet"
                    columns="id|commande|objet|prix" labels="ID|Commande|Objet|Prix" filter=""
                    title="Liste des fournitures du fichier data/test.csv" displaytotal="1"
                    pagination="display:1;perpage:6;page:1;selectpages:2,6,12,24,48" orderby="objet,DESC" _refresh="2" />
            </div>
            <div class="col-6">
                <dge-table id="dge-table-1" api="csv" url="data/test3.csv" fields="id,commande,prix,objet"
                    columns="id|commande|objet|prix" parsehtml="true" labels="ID|Commande|Objet|Prix" filter=""
                    title="Liste des fournitures du fichier data/test.csv" displaytotal="1"
                    pagination="display:1;perpage:6;page:1;selectpages:2,6,12,24,48" orderby="objet,DESC" />
            </div>
            <div class="col-6">
                <dge-table id="dge-table-2" api="csv" url="./data/"
                    datasets="commandes.csv,cmd|objets.csv,obj|contacts.csv,cnt"
                    fields="id,commande,objet,quantite|id,objet,prix|id,nom"
                    from="? AS cmd JOIN ? AS obj ON cmd.objet=obj.id JOIN ? AS cnt on cmd.contact=cnt.id"
                    columns="cmd.commande|cmd.quantite*obj.prix,cout|cnt.nom" labels="Commande|Coût (€)|Contact"
                    where="cmd.commande=3" title="Liste des fournitures de la commande 3 du fichier data/test.csv"
                    filter="Sélectionner un contact|cnt.nom" sortcolumns="cnt_nom" />
            </div>
            <div class="col-6">
                <dge-table id="dge-table-3" api="csv" url="./data/" datasets="test.csv"
                    fields="id,commande,objet,quantite,prix" where="commande=3"
                    columns="id|commande|objet|prix*quantite,cout" labels="ID|Commande|Objet|Coût (€)"
                    title="Liste des fournitures de la commande 3 du fichier data/test.csv"
                    filter="Sélectionner un objet|objet" />
            </div>
            <div class="col-6">
                <dge-table id="dge-table-4" api="wfs" url="https://www.datagrandest.fr/geoserver/region-grand-est/wfs"
                    datasets="commune_actuelle" fields="insee_com,nom_com,superf_km,pmun_rp2018"
                    columns="insee_com|nom_com|superf_km|pmun_rp2018" labels="INSEE|COMMUNE|KM²|HAB." max="6000"
                    where="" title="Liste des communes du Grand Est"
                    smalltable="1"
                    search="Recherche par code INSEE ou le nom de la commune|insee_com,nom_com|0800" displaytotal="1"
                    displaypagination="1" perpage="5" page="1" localcss="1"
                    datalink="icon:table;title:Lien vers les données;url:https://www.datagrandest.fr"
                    attribution="icon:info-circle-fill;title:DataGrandEst;url:https://www.datagrandest.fr"
                    sortcolumns="true" />
            </div>
        </div> -->

        <!-- CHARTS -->
        <div class="row my-3">

            <!-- <div class="col-6">
                <dge-chart id="dge-chart-wordcloud" api="csv" url="data/wordcloud.csv" fields="word,val" x="word"
                    y="val" chart="wordCloud" title="Word Cloud Test" legend="display:false" download="text:télécharger"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr" />
            </div> -->

            <div class="col-6">
                <!-- NOCODB -->
                <!-- <dge-chart id="dge-test-1" api="json" url="data/nocodb.php" properties="list" fields="ID,NAME,AGE" x="ID" y="AGE"
                    series="Age" chart="bar" title="NocoDB Test" colors="rgba(20,90,186,0.5)"
                    download="icon:cloud-download;size:1rem"
                    attribution="icon:info-circle;url:https://www.datagrandest.fr;title:Source: DataGrandEst"
                    datalink="icon:table;title:Lien vers les données" localcss="1" /> -->
            </div>

            <!-- <div class="col-6">
                <dge-chart id="dge-chart-test" api="csv" url="data/test.csv" fields="quantite,prix,objet,commande"
                    x="objet" y="quantite|quantite*prix,cout" chart="bar|line" title="Test" legend="display:true"
                    download="text:télécharger" where="commande=3" _refresh="2" animation="duration=0"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr" />
            </div>

             <div class="col-6">
                <dge-chart id="dge-chart-treemap" api="csv" url="data/ca-region.csv"
                    fields="BGT_CONTNAT_LABEL,BGT_MTREAL" x="BGT_CONTNAT_LABEL" y="sum(BGT_MTREAL),montant"
                    series="Budget Région" chart="treemap" groupby="BGT_CONTNAT_LABEL" treemap="decimal:2;unit: €"
                    title="Tree" colors="rgba(20,90,186,0.5)" colorgradient="true" />
            </div>

            <div class="col-6">
                <dge-chart id="dge-chart-gauge" api="csv" url="data/gauge.csv" fields="a,b" x="a" y="b" series="Oui/Non"
                    chart="gauge" title="Total: %sum,0% votes" colors="rgba(2,150,2,0.5);rgba(20,90,186,0.5)"
                    animation="duration:5000" gauge="circumference:270;rotation:-90" labels="O|N"
                    textcenter="label:OUI;color:rgba(120,180,60,1);baseLine:middle;align:center;fontSize:12;fontFamily:Arial;fontStyle:normal;fontWeight:normal;y:0;x:0|label:%percent,2,0%%;color:rgba(180,120,60,1);baseLine:middle;align:center;fontSize:15;fontWeight:bold;fontFamily:Arial;y:0"
                    dldisplay="true" dldisplaylimit="0" dlcolor="#eee" dlalign="center" dlanchor="center"
                    dlformat="percent,2" dlunit="%" />
            </div>

            <div class="col-6">
                <dge-chart id="dge-chart-gauge" api="csv" url="data/gauge2.csv" fields="question,oui,mais,non,saispas"
                    x="question" y="oui|mais|non|saispas" series="Oui/Non" chart="gauge" title="Total: %sum,0% votes"
                    colors="rgba(2,150,2,0.7);rgba(2,150,2,0.5);rgba(200,90,86,0.5);rgba(20,90,186,0.5)"
                    labels="OUI|OUI, MAIS|NON|NE SAIS PAS" animation="duration:5000" where="id=1"
                    gauge="circumference:270;rotation:-90" reverse="1"
                    textcenter="label:OUI;color:rgba(120,180,60,1);baseLine:middle;align:center;fontSize:12;fontFamily:Arial;fontStyle:normal;fontWeight:normal;y:0;x:0|label:%percent,2,0-1%%;color:rgba(180,120,60,1);baseLine:middle;align:center;fontSize:15;fontWeight:bold;fontFamily:Arial;y:0"
                    dldisplay="true" dldisplaylimit="0" dlcolor="#eee" dlalign="center" dlanchor="center"
                    dlformat="percent,2" dlunit="%" />
            </div>

            <div class="col-6">
                <dge-chart id="dge-chart-bar-s" height="1" api="csv" url="data/gauge2.csv"
                    fields="id,question,oui,non,saispas" x="question" y="oui|non|saispas" series="OUI|NON|NE SAIS PAS"
                    _filter="|question|Q1: Ma question n°1" chart="bar-hs" _title="Total: %sum,0% réponses"
                    title="Quelles sont vos préférence? (détails)"
                    colors="rgba(2,150,2,0.5)|rgba(180,50,26,0.5)|rgba(20,90,186,0.5)" animation="duration:5000"
                    where="id=1 OR id=2" dldisplay="true" dldisplaylimit="8" dlcolor="#eee" dlalign="center"
                    dlanchor="center" dlformat="percent" dlunit="%" />
            </div>
            <div class="col-6">
                <dge-chart id="dge-chart-bar-s" height="1" api="csv" url="data/gauge2.csv"
                    fields="id,question,oui,non,saispas" x="question" y="oui|non|saispas" series="OUI|NON|NE SAIS PAS"
                    _filter="|question|Q1: Ma question n°1" chart="bar-hs" _title="Total: %sum,0% réponses"
                    title="Quelles sont vos préférence? (réponse gloable)"
                    colors="rgba(2,150,2,0.5)|rgba(180,50,26,0.5)|rgba(20,90,186,0.5)" animation="duration:5000"
                    where="id=3" dldisplay="true" dldisplaylimit="8" dlcolor="#eee" dlalign="center" dlanchor="center"
                    dlformat="percent" dlunit="%" />
            </div>

            <div class="col-6">
                <dge-chart id="dge-chart-bar-s" height="2" api="csv" url="data/gauge2.csv"
                    fields="id,question,oui,non,saispas" x="question" y="oui|non|saispas" series="OUI|NON|NE SAIS PAS"
                    _filter="Toutes les questions|question" chart="bar" title="Total: %sum,0% réponses"
                    colors="rgba(2,150,2,0.5)|rgba(180,50,26,0.5)|rgba(20,90,186,0.5)" animation="duration:5000"
                    dldisplay="true" dldisplaylimit="8" dlcolor="#eee" dlalign="center" dlanchor="center"
                    dlformat="percent" dlunit="%" />
            </div>
            
            <div class="col-6">
                <dge-chart 
                    id="dge-chart-bar-h" 
                    height="2" 
                    api="csv"
                    url=""
                    datasets="http://127.0.0.1:8080/public/data/data1.csv,d1|http://127.0.0.1:8080/public/data/data2.csv,d2"
                    fields="age,nb1|age,nb1"
                    x="d1.age" 
                    y="d1.nb1|d2.nb1" 
                    from="? d1 INNER JOIN ? as d2 ON d1.age=d2.age"
                    series="nb1|nb2"
                    chart="bar-h" 
                    title="Test"
                    animation="duration:0"
                    xaxis="stacked:false;positiveSticks:true"
                    yaxis="stacked:true;display:false|stacked:true;display:false"
                />
            </div>
            <div class="col-6">
                <dge-chart 
                    id="dge-chart-bar-h" 
                    height="2" 
                    api="csv"
                    url="http://127.0.0.1:8080/public/data/"
                    datasets="data1.csv"
                    fields="age,nb1,nb2"
                    x="age" 
                    y="nb1|nb2" 
                    orderby="age,DESC"
                    series="nb1|nb2"
                    chart="bar-hs"
                    title="Test"
                    animation="duration:0"
                    xaxis="positiveSticks:true"
                />
            </div>
            
            <div class="col-6">
                <dge-chart id="dge-chart-bar-h" height="2" api="csv" url="data/gauge2.csv"
                    fields="id,question,oui,non,saispas" x="question" y="non" series="NON"
                    chart="bars-h" title="Total: %sum,0% réponses"
                    colors="rgba(2,150,2,0.5);rgba(180,50,26,0.5);rgba(2,150,2,0.5);rgba(2,150,2,0.5)"
                    animation="duration:0" dldisplay="true" dldisplaylimit="8" dlcolor="#eee" dlalign="center"
                    dlanchor="center" dlformat="percent" dlunit="%" xaxis="display:false" yaxis="drawGrid:0" />
            </div> 

            <div class="col-6">
                <dge-chart id="dge-chart-1" 
                    title="Nombre d'habitants par ville"
                    attribution="text:DataGrandEst;url:https://www.datagrandest.fr"
                    api="csv"
                    url="data/villes.csv" 
                    x="ville" 
                    y="population" 
                    series="Nombre d'habitants" 
                    chart="bar"
                    xaxis="drawGrid:true;display:false"
                     />
            </div> -->
        </div>


        <!-- MAPS -->
        <div class="row my-3">
            <!-- <div class="col-6">
                <dge-map id="dge-map-1" height="50vh" attribution="text:GéoGrandEst;url:https://www.datagrandest.fr"
                    center="48.6|7.75" zoom="10" url="./data/departements.geojson" layersname="Départements"
                    api="geojson" fields="code,nom,site,logo" labels="CODE,NOM,SITE,LOGO" osm="true"
                    queryable="departements.geojson" />
            </div> -->
            <!-- <div class="col-6">
                <dge-map id="dge-map-1" height="50vh" title="Communes de l'EMS"
                    attribution="text:GéoGrandEst;url:https://www.datagrandest.fr|text:OpenStreetMap;url:https://www.openstreetmap.org/copyright"
                    center="48.6|7.75" zoom="10" url="https://www.datagrandest.fr/geoserver/region-grand-est/ows"
                    api="wms" layers="commune_actuelle_3857,commune_actuelle_centroide"
                    layersname="Communes (poly),Commmunes (point)" styles="" version="1.1.0" format="image/png"
                    transparent="true" filters="id_epci='246700488'" queryable="commune_actuelle_3857"
                    fields="insee_com,nom_com,id_epci,epci_nom_complet" labels="INSEE,COMMUNE,EPCI ID,EPCI"
                    baselayer="https://osm.datagrandest.fr/mapcache/?,relief" osm="true" />
            </div> -->
            <!-- <div class="col-6">
                <dge-map id="dge-map-3" height="50vh" title="Communes de l'EMS"
                    attribution="text:GéoGrandEst;url:https://www.datagrandest.fr|text:OpenStreetMap;url:https://www.openstreetmap.org/copyright"
                    center="48.6|7.75" zoom="10" data="
                    url:https://www.datagrandest.fr/geoserver/region-grand-est/ows;
                    api:wms;
                    layers:commune_actuelle_3857,commune_actuelle_centroide;
                    layersname:Communes (poly),Commmunes (point);
                    transparent:true;
                    filters:id_epci='246700488';
                    queryable:commune_actuelle_3857;
                    fields:insee_com,nom_com,id_epci,epci_nom_complet;
                    labels:INSEE,COMMUNE,EPCI ID,EPCI|
                    url:./data/departements.geojson;
                    layersname:Départements;
                    api:geojson;
                    fields:code,nom,site,logo;
                    labels:CODE,NOM,SITE,LOGO;
                    queryable:departements.geojson"
                    baselayers="url:https://osm.datagrandest.fr/mapcache/?;layers:relief;layersname:OSM Relief DataGrandEst"
                    osm="true" gesturehandling="true" />
            </div> -->
            <div class="col-6">
                <dge-map 
                    id="dge-map-poi" 
                    height="50vh" 
                    title="Carte des POI"
                    attribution="text:ART Grand Est;url:https://www.art-grandest.fr/|text:OpenStreetMap;url:https://www.openstreetmap.org/copyright"
                    center="48.8|5.90" 
                    zoom="7" 
                    url="https://www.datagrandest.fr/geoserver/region-grand-est/ows?"
                    api="wms" 
                    layers="poi"
                    layersname="POI Grand Est"
                    styles="poi"
                    version="1.1.1"
                    format="image/png"
                    transparent="true"
                    queryable="poi"
                    fields="titre,types,commune,code_postal,telephone,gratuit, code_dept" 
                    labels="TITRE,CATEGORIE,COMMUNE,CODE POSTAL,TEL.,GRATUIT"
                    baselayer="https://osm.datagrandest.fr/mapcache/?,relief" 
                    osm="true"
                    filters="code_dept='67'" />
            </div>
        </div>

    </div>

</body>

</html>